# 作業メモ（2025-09-26）

## 作業概要
- tarot-adviser モジュールの実装とテストコード生成。
- 外部仕様（`Tarot-card-fortune-telling/doc/tarot-adviser.txt`）を参照し、アーキテクチャ（Domain/PromptBuilder/LLMClient/Parser/UseCase）を反映。
- 日本語ドキュメントを `doc/tarot-adviser.md` として作成。

## 主な変更点
- `lib/tarot-adviser/` を新規追加：
  - `domain.js`（Card/Spread/Reading の型定義）
  - `promptBuilder.js`（プロンプト生成）
  - `llmClient.js`（LLM 抽象＋スタブ実装）
  - `parser.js`（JSON 検証＋フォールバック）
  - `usecase.js`（`GenerateReadingUseCase`、簡易キャッシュ・ログ）
  - `index.js`（エクスポート集約）
- `doc/tarot-adviser-test/` を新規追加：
  - `run-sample.js`／`test-cache.js`／`test-invalid-json.js`（Node で実行可能）
  - 一括実行用 `run-all.cmd`、使い方 `README.txt`
- `doc/tarot-adviser.md`（説明資料）を追加。

## テスト実行方法（メモ）
- コマンドプロンプトでリポジトリ直下：
  - 一括: `doc\\tarot-adviser-test\\run-all.cmd`
  - 個別: `node doc\\tarot-adviser-test\\run-sample.js` など
- いずれもスタブ LLM を使用（ネットワーク不要）。

## 付記
- 仕様テキストは一部文字化け（エンコーディング差異）があったが、構成要素の把握に支障なし。
- OpenAI 連携は未実装（将来 `llmClient` 差し替えで対応可能）。

